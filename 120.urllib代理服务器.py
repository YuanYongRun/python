import urllib.request

url ="https://www.baidu.com/s?wd=ip"
headers = {
'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',
# 'Accept-Encoding': 'gzip, deflate, br',
'Accept-Language': 'zh-CN,zh;q=0.9',
'Cache-Control': 'max-age=0',
'Connection': 'keep-alive',
'Cookie': 'BIDUPSID=61B8B290275EBFAC2EDC2491086348FF; PSTM=1682519775; BAIDUID=61B8B290275EBFAC651668B30642E883:FG=1; BD_UPN=12314753; BDUSS=RkV3VUMGR-SmJabEVNS04xUmtmdDFsV2ZUb3BuZDl4OGFhcEtxdXA0ZDlIWEprSVFBQUFBJCQAAAAAAAAAAAEAAADQjATE0-6IuNPQ19MAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH2QSmR9kEpkM1; BDUSS_BFESS=RkV3VUMGR-SmJabEVNS04xUmtmdDFsV2ZUb3BuZDl4OGFhcEtxdXA0ZDlIWEprSVFBQUFBJCQAAAAAAAAAAAEAAADQjATE0-6IuNPQ19MAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH2QSmR9kEpkM1; H_WISE_SIDS=219946_234020_131862_216840_213360_219943_213035_230185_204903_110085_243884_244722_245412_248174_250148_247147_250888_249893_253427_254296_240590_254831_256083_255660_256508_256739_251972_254075_257289_254317_257438_257731_257939_257824_257586_258163_257996_258375_258724_258938_258984_230288_259037_257015_259276_256225_259285_259569_256998_259558_259648_259705_258772_234296_234207_257262_259909_259642_259052_260034_254300_260114_257302_259241_256230_260357_260365_253022_255212_260158_260570_258080_260335_251786_260806_260836_259408_259312_259422_259584_260720_259031_261034_261029_261122_261376_253901_259355_261562_261333_261712_261756_259447_261863_261983_262000_261990_262050_259782_255910_262032_262184_262228_261411_260440_262026_261800_259629_262344_236312_262489_262297_262446_261868_258957_262533_262603_262609_262604_262601_251132_259520_259950_262776; H_WISE_SIDS_BFESS=219946_234020_131862_216840_213360_219943_213035_230185_204903_110085_243884_244722_245412_248174_250148_247147_250888_249893_253427_254296_240590_254831_256083_255660_256508_256739_251972_254075_257289_254317_257438_257731_257939_257824_257586_258163_257996_258375_258724_258938_258984_230288_259037_257015_259276_256225_259285_259569_256998_259558_259648_259705_258772_234296_234207_257262_259909_259642_259052_260034_254300_260114_257302_259241_256230_260357_260365_253022_255212_260158_260570_258080_260335_251786_260806_260836_259408_259312_259422_259584_260720_259031_261034_261029_261122_261376_253901_259355_261562_261333_261712_261756_259447_261863_261983_262000_261990_262050_259782_255910_262032_262184_262228_261411_260440_262026_261800_259629_262344_236312_262489_262297_262446_261868_258957_262533_262603_262609_262604_262601_251132_259520_259950_262776; newlogin=1; MCITY=-257%3A; ispeed_lsm=0; BDSFRCVID=e6DOJeC629VsKMnfG2MdMK6rFRN1TM6TH6aoGj5RLCG2dC44-Pl4EG0P8f8g0KubJ2MRogKK3gOTH6KF_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF=tJ4toCPMJI_3fP36q4Rh-tFO-frQaC62aKDs0CQgBhcqEIL4eqj5yUuHb4tHW43uWbcHKfoktxbYMxbSj4QoQPT004vm05jb0bPJsxJsJp5nhMt9b67JDMP0-4CHWljy523iob3vQpP-OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xb6_0-nDSHHLDtj_H3e; H_PS_PSSID=26350; ab_sr=1.0.1_OWQ4NDAzNzY1NjUyZjk2NzcyZmEwMWM1M2RmOWYzY2FjOTAwNWU0YjkxOWVlYzFjMDExODVkZDBjM2MxMWFjZGU3YzZmNzVkOGI0OGZhYWYyYzhlMzdlNmI4NTY5ZmM1Y2QyMTIwZmIzN2JjZjUzOTE4ZDExZTc2ODZmMGRlNWRkNDFmYmY4YzcxOWJkNTRhZTBmOTExNmMxYjIzZDAxMQ==; BDORZ=FFFB88E999055A3F8A630C64834BD6D0; BA_HECTOR=20ak810l8k0g242h8h2h2g2d1iaoci61p; BAIDUID_BFESS=61B8B290275EBFAC651668B30642E883:FG=1; BDSFRCVID_BFESS=e6DOJeC629VsKMnfG2MdMK6rFRN1TM6TH6aoGj5RLCG2dC44-Pl4EG0P8f8g0KubJ2MRogKK3gOTH6KF_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF_BFESS=tJ4toCPMJI_3fP36q4Rh-tFO-frQaC62aKDs0CQgBhcqEIL4eqj5yUuHb4tHW43uWbcHKfoktxbYMxbSj4QoQPT004vm05jb0bPJsxJsJp5nhMt9b67JDMP0-4CHWljy523iob3vQpP-OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xb6_0-nDSHHLDtj_H3e; delPer=0; BD_CK_SAM=1; PSINO=7; ZFY=2ELh3xrXf3UvjbsBqU82:AM42mS9CzNZd1CllqF8Gzv0:C; COOKIE_SESSION=6_1_8_9_3_15_1_0_8_8_2_1_77_0_13_0_1689005864_1689004730_1689005851%7C9%2329678_346_1689004728%7C9; BDRCVFR[QPLP47sAeVT]=mk3SLVN4HKm; B64_BOT=1; H_PS_645EC=1672fmQU5MVikUhft10td30smjSoQRGgXriXBQcVn%2FTj%2FKPacHElQdaouOutztbzZI1zZB95bi7s6w; baikeVisitId=9371999f-91ac-4d99-a60b-bd764cfe9988',
'Host': 'www.baidu.com',
'Sec-Fetch-Dest': 'document',
'Sec-Fetch-Mode': 'navigate',
'Sec-Fetch-Site': 'same-origin',
'Sec-Fetch-User': '?1',
'Upgrade-Insecure-Requests': '1',
'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36',}

request = urllib.request.Request(url = url,headers=headers)


# response = urllib.request.urlopen(request)


proxies = {
    'http':'60.167.20.62:1133'
   }
handler = urllib.request.ProxyHandler(proxies=proxies)

opener =urllib.request.build_opener(handler)

response = opener.open((request))
content = response.read().decode("utf-8")
# 保存到本地
with open("daili2.html","w",encoding="utf-8") as fp:
    fp.write(content)
